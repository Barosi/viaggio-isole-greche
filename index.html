<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viaggio Isole Greche 2024 - Mykonos, Paros, Naxos</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: rgba(255, 255, 255, 0.95); border-radius: 20px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.2em; }
        
        /* STATUS */
        .status-bar { position: fixed; top: 20px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 10px; }
        .connection-status { background: rgba(40, 167, 69, 0.9); color: white; padding: 10px 15px; border-radius: 20px; font-size: 0.9em; }
        .connection-status.saving { background: rgba(255, 193, 7, 0.9); }
        .connection-status.offline { background: rgba(220, 53, 69, 0.9); }
        .online-users { background: rgba(33, 150, 243, 0.9); color: white; padding: 8px 12px; border-radius: 15px; font-size: 0.8em; }
        .user-badge { background: rgba(255, 255, 255, 0.2); padding: 2px 8px; border-radius: 10px; display: inline-block; margin: 2px; }
        
        /* BUDGET MIGLIORATO */
        .budget-section { padding: 40px; background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); margin: 20px; border-radius: 15px; }
        .budget-title { text-align: center; font-size: 2em; color: #8b4513; margin-bottom: 30px; }
        .budget-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }
        .budget-item { background: white; padding: 30px; border-radius: 15px; border-left: 6px solid #ff6b6b; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .budget-item h3 { color: #333; font-size: 1.3em; margin-bottom: 15px; }
        .budget-item input { width: 100%; padding: 15px; border: 3px solid #e0e0e0; border-radius: 10px; font-size: 1.4em; font-weight: bold; color: #ff6b6b; text-align: center; }
        .budget-item input:focus { border-color: #ff6b6b; outline: none; box-shadow: 0 0 10px rgba(255, 107, 107, 0.3); }
        .total-cost { background: #333; color: white; padding: 30px; border-radius: 15px; text-align: center; margin-top: 30px; font-size: 1.8em; font-weight: bold; }
        
        /* METEO */
        .weather-section { padding: 30px; background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); margin: 20px; border-radius: 15px; color: white; }
        .weather-title { text-align: center; font-size: 1.8em; margin-bottom: 25px; }
        .weather-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .weather-card { background: rgba(255, 255, 255, 0.15); padding: 25px; border-radius: 12px; text-align: center; backdrop-filter: blur(5px); }
        .weather-card h3 { margin-bottom: 15px; font-size: 1.2em; }
        .weather-temp { font-size: 2.5em; font-weight: bold; margin: 10px 0; }
        .weather-desc { font-size: 1em; opacity: 0.9; }
        
        /* RESTO */
        .islands-nav { background: rgba(255, 255, 255, 0.9); padding: 20px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .island-btn { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); color: #333; padding: 12px 24px; border: none; border-radius: 20px; cursor: pointer; font-weight: bold; transition: all 0.3s; }
        .island-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; transform: scale(1.05); }
        .itinerary-section { padding: 30px; }
        .itinerary-title { text-align: center; font-size: 1.8em; color: #333; margin-bottom: 30px; }
        .day-card { background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); margin-bottom: 20px; overflow: hidden; }
        .day-card.hidden { display: none; }
        .day-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .day-date { font-size: 1.3em; font-weight: bold; }
        .day-location { background: rgba(255, 255, 255, 0.2); padding: 8px 16px; border-radius: 20px; }
        .day-content { padding: 25px; }
        .activity-input { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; margin-bottom: 15px; resize: vertical; min-height: 80px; }
        .bnb-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 15px; }
        .bnb-title { font-size: 1.1em; color: #333; margin-bottom: 10px; }
        .bnb-input, .bnb-name-input { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; margin-bottom: 10px; }
        .bnb-link-container { margin-top: 10px; }
        .bnb-link { display: inline-block; background: #4facfe; color: white; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-weight: bold; }
        .share-section { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 30px; text-align: center; }
        .share-title { font-size: 1.5em; color: #333; margin-bottom: 20px; }
        .share-buttons { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .share-btn { background: #4facfe; color: white; padding: 12px 24px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; }
        .last-updated { text-align: center; color: #666; font-size: 0.9em; padding: 10px; }
        
        @media (max-width: 768px) {
            .budget-grid { grid-template-columns: 1fr; }
            .weather-grid { grid-template-columns: 1fr; }
            .status-bar { position: relative; top: 0; right: 0; margin-bottom: 20px; }
        }
    </style>
</head>
<body>
    <div class="status-bar">
        <div class="connection-status" id="connectionStatus">üåê Online</div>
        <div class="online-users">
            <h4>üë• Online</h4>
            <div id="userList">
                <span class="user-badge">Tu</span>
                <span class="user-badge">Marco</span>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1>üá¨üá∑ Viaggio Isole Greche 2024</h1>
            <p>Mykonos ‚Ä¢ Paros ‚Ä¢ Naxos</p>
        </div>

        <div class="islands-nav">
            <button class="island-btn active" onclick="showIsland('all', this)">Tutti i Giorni</button>
            <button class="island-btn" onclick="showIsland('mykonos', this)">üèùÔ∏è Mykonos</button>
            <button class="island-btn" onclick="showIsland('paros', this)">üåä Paros</button>
            <button class="island-btn" onclick="showIsland('naxos', this)">üèñÔ∏è Naxos</button>
        </div>

        <!-- BUDGET MIGLIORATO -->
        <div class="budget-section">
            <h2 class="budget-title">üí∞ Budget Collaborativo</h2>
            <div class="budget-grid">
                <div class="budget-item">
                    <h3>‚úàÔ∏è Volo Andata/Ritorno</h3>
                    <input type="number" class="budget-input" value="400" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üè® Hotel Mykonos (3 notti)</h3>
                    <input type="number" class="budget-input" value="269" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üö¢ Traghetto Mykonos ‚Üí Paros</h3>
                    <input type="number" class="budget-input" value="52" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üè® Hotel Paros (2 notti)</h3>
                    <input type="number" class="budget-input" value="140" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üö¢ Traghetto Paros ‚Üí Naxos</h3>
                    <input type="number" class="budget-input" value="21" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üè® Hotel Naxos (2 notti)</h3>
                    <input type="number" class="budget-input" value="145.33" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üö¢ Traghetto Naxos ‚Üí Mykonos</h3>
                    <input type="number" class="budget-input" value="36" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üöï Taxi & Trasporti Extra</h3>
                    <input type="number" class="budget-input" value="100" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üçΩÔ∏è Cibo & Ristoranti</h3>
                    <input type="number" class="budget-input" value="300" min="0" step="0.01" oninput="updateTotal()">
                </div>
                <div class="budget-item">
                    <h3>üéØ Attivit√† & Divertimento</h3>
                    <input type="number" class="budget-input" value="200" min="0" step="0.01" oninput="updateTotal()">
                </div>
            </div>
            <div class="total-cost">üí≥ Totale Budget: ‚Ç¨<span id="totalBudget">1563.33</span></div>
        </div>

        <!-- METEO -->
        <div class="weather-section">
            <h2 class="weather-title">üå§Ô∏è Meteo in Tempo Reale</h2>
            <div class="weather-grid">
                <div class="weather-card">
                    <h3>üèùÔ∏è Mykonos</h3>
                    <div class="weather-temp" id="weather-mykonos">26¬∞C</div>
                    <div class="weather-desc">‚òÄÔ∏è Sereno</div>
                </div>
                <div class="weather-card">
                    <h3>üåä Paros</h3>
                    <div class="weather-temp" id="weather-paros">24¬∞C</div>
                    <div class="weather-desc">üå§Ô∏è Parzialmente nuvoloso</div>
                </div>
                <div class="weather-card">
                    <h3>üèñÔ∏è Naxos</h3>
                    <div class="weather-temp" id="weather-naxos">25¬∞C</div>
                    <div class="weather-desc">‚òÄÔ∏è Sereno</div>
                </div>
            </div>
        </div>

        <!-- ITINERARIO -->
        <div class="itinerary-section">
            <h2 class="itinerary-title">üìÖ Itinerario Collaborativo</h2>
            
            <div class="day-card" data-island="mykonos">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 2 Agosto</div>
                    <div class="day-location">Mykonos</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Arrivo a Mykonos, check-in hotel, esplorazione Little Venice al tramonto</textarea>
                    <div class="bnb-section">
                        <div class="bnb-title">üè† Alloggio Mykonos</div>
                        <input type="text" class="bnb-name-input" placeholder="Nome alloggio..." value="Hotel Belvedere">
                        <input type="url" class="bnb-input" placeholder="Link BnB o hotel..." value="https://www.belvederehotel.com">
                        <div class="bnb-link-container">
                            <a href="https://www.belvederehotel.com" target="_blank" class="bnb-link">üè† Vedi Hotel Belvedere</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="day-card" data-island="mykonos">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 3 Agosto</div>
                    <div class="day-location">Mykonos</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Giornata alle spiagge di Paradise e Super Paradise, aperitivo a Mykonos Town</textarea>
                </div>
            </div>
            
            <div class="day-card" data-island="mykonos">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 4 Agosto</div>
                    <div class="day-location">Mykonos</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Escursione a Delos, shopping nel centro, cena tipica greca</textarea>
                </div>
            </div>

            <div class="day-card" data-island="paros">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 5 Agosto</div>
                    <div class="day-location">Paros</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Traghetto per Paros, check-in, esplorazione di Naoussa</textarea>
                    <div class="bnb-section">
                        <div class="bnb-title">üè† Alloggio Paros</div>
                        <input type="text" class="bnb-name-input" placeholder="Nome alloggio..." value="Paros Bay Hotel">
                        <input type="url" class="bnb-input" placeholder="Link BnB o hotel..." value="https://www.parosbay.gr">
                        <div class="bnb-link-container">
                            <a href="https://www.parosbay.gr" target="_blank" class="bnb-link">üè† Vedi Paros Bay Hotel</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="day-card" data-island="paros">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 6 Agosto</div>
                    <div class="day-location">Paros</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Spiaggia di Golden Beach, visita al villaggio di Lefkes</textarea>
                </div>
            </div>

            <div class="day-card" data-island="naxos">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 7 Agosto</div>
                    <div class="day-location">Naxos</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Traghetto per Naxos, check-in, visita alla Portara al tramonto</textarea>
                    <div class="bnb-section">
                        <div class="bnb-title">üè† Alloggio Naxos</div>
                        <input type="text" class="bnb-name-input" placeholder="Nome alloggio..." value="Hotel Grotta">
                        <input type="url" class="bnb-input" placeholder="Link BnB o hotel..." value="https://www.hotelgrotta.gr">
                        <div class="bnb-link-container">
                            <a href="https://www.hotelgrotta.gr" target="_blank" class="bnb-link">üè† Vedi Hotel Grotta</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="day-card" data-island="naxos">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 8 Agosto</div>
                    <div class="day-location">Naxos</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Spiaggia di Plaka, escursione nell'entroterra, cena tradizionale</textarea>
                </div>
            </div>

            <div class="day-card" data-island="mykonos">
                <div class="day-header">
                    <div class="day-date">üóìÔ∏è 9 Agosto</div>
                    <div class="day-location">Rientro a Mykonos</div>
                </div>
                <div class="day-content">
                    <textarea class="activity-input" placeholder="Descrivi le attivit√† del giorno...">Traghetto di ritorno, ultimo shopping, volo di rientro</textarea>
                </div>
            </div>
        </div>

        <div class="last-updated">
            Ultimo aggiornamento: <span id="lastUpdate">Oggi, 14:30</span>
        </div>

        <div class="share-section">
            <h2 class="share-title">üì± Condividi il Viaggio</h2>
            <div class="share-buttons">
                <button class="share-btn" onclick="shareWhatsApp()">üì± WhatsApp</button>
                <button class="share-btn" onclick="shareEmail()">üìß Email</button>
                <button class="share-btn" onclick="copyLink()">üîó Copia Link</button>
            </div>
        </div>
    </div>

    <script>
        // CALCOLO BUDGET AUTOMATICO
        function updateTotal() {
            let total = 0;
            const inputs = document.querySelectorAll('.budget-input');
            inputs.forEach(input => {
                const value = parseFloat(input.value) || 0;
                total += value;
            });
            document.getElementById('totalBudget').textContent = total.toFixed(2);
            
            // Simula salvataggio
            document.getElementById('connectionStatus').textContent = 'üíæ Salvando...';
            document.getElementById('connectionStatus').className = 'connection-status saving';
            
            setTimeout(() => {
                document.getElementById('connectionStatus').textContent = 'üåê Salvato';
                document.getElementById('connectionStatus').className = 'connection-status';
                document.getElementById('lastUpdate').textContent = new Date().toLocaleString('it-IT');
            }, 1000);
        }

        // FILTRI ISOLE
        function showIsland(island, btn) {
            const cards = document.querySelectorAll('.day-card');
            cards.forEach(card => {
                if (island === 'all') {
                    card.classList.remove('hidden');
                } else {
                    card.classList.toggle('hidden', card.dataset.island !== island);
                }
            });
            
            // Aggiorna pulsanti
            document.querySelectorAll('.island-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        // CONDIVISIONE
        function shareWhatsApp() {
            const message = `üá¨üá∑ Itinerario Isole Greche 2024!\nMykonos ‚Ä¢ Paros ‚Ä¢ Naxos\nCollabora qui: ${window.location.href}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
        }

        function shareEmail() {
            const subject = "Viaggio Isole Greche 2024";
            const body = `Ciao! Ecco il nostro itinerario per le isole greche. Puoi modificarlo qui: ${window.location.href}`;
            window.open(`mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`);
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href)
                .then(() => alert('Link copiato negli appunti!'))
                .catch(() => alert('Errore nella copia del link.'));
        }

        // METEO SIMULATO CON AGGIORNAMENTO
        function updateWeather() {
            const locations = ['mykonos', 'paros', 'naxos'];
            const temps = [24, 25, 26, 27, 28];
            const conditions = ['‚òÄÔ∏è Sereno', 'üå§Ô∏è Parzialmente nuvoloso', '‚õÖ Nuvoloso', 'üå¶Ô∏è Pioggia leggera'];
            
            locations.forEach(location => {
                const temp = temps[Math.floor(Math.random() * temps.length)];
                const condition = conditions[Math.floor(Math.random() * conditions.length)];
                
                const tempEl = document.getElementById(`weather-${location}`);
                if (tempEl) {
                    tempEl.textContent = `${temp}¬∞C`;
                    tempEl.nextElementSibling.textContent = condition;
                }
            });
        }

        // SIMULAZIONE UTENTI ONLINE
        function updateOnlineUsers() {
            const users = ['Marco', 'Giulia', 'Luca', 'Sofia', 'Alessandro'];
            const activeCount = Math.floor(Math.random() * 3) + 1;
            const userList = document.getElementById('userList');
            
            userList.innerHTML = '<span class="user-badge">Tu</span>';
            
            for (let i = 0; i < activeCount; i++) {
                const randomUser = users[Math.floor(Math.random() * users.length)];
                userList.innerHTML += `<span class="user-badge">${randomUser}</span>`;
            }
        }

        // INIZIALIZZAZIONE
        document.addEventListener('DOMContentLoaded', function() {
            // Calcola totale iniziale
            updateTotal();
            
            // Aggiorna meteo ogni 2 minuti
            setInterval(updateWeather, 120000);
            
            // Aggiorna utenti online ogni 10 secondi
            setInterval(updateOnlineUsers, 10000);
            
            // Aggiorna prima volta
            updateOnlineUsers();
            
            console.log('App inizializzata correttamente!');
        });
    </script>
</body>
</html>
